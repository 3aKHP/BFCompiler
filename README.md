# BFCompiler

[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![C++](https://img.shields.io/badge/Language-C++17-00599C.svg)](https://en.wikipedia.org/wiki/C%2B%2B17)
[![Platform](https://img.shields.io/badge/Platform-Windows_AMD64-lightgrey.svg)]()
[![CMake](https://img.shields.io/badge/Build-CMake_3.16+-064F8C.svg)](https://cmake.org/)

å¼ºå¤§çš„ Brainfuck è¯­è¨€å·¥å…·é“¾é¡¹ç›®ï¼Œæä¾›ä¸€ç«™å¼çš„ BF ç¨‹åºè§£é‡Šã€è½¬è¯‘å’Œç¼–è¯‘åŠŸèƒ½ã€‚

æœ¬å·¥å…·é“¾åŒ…å«å¼ºå¤§çš„**ä¼˜åŒ–å‰ç«¯**å’Œ**å¤šåç«¯ç›®æ ‡**æ”¯æŒï¼Œä¸ä»…å¯ä»¥å°† Brainfuck ç›´æ¥è§£é‡Šæ‰§è¡Œï¼Œä¹Ÿå¯ä»¥å°†å…¶ç¿»è¯‘æˆ C è¯­è¨€ä»£ç ï¼Œç”šè‡³å¯ä»¥ç›´æ¥ç¼–è¯‘ä¸º x86-64 æ±‡ç¼–ä»£ç æˆ–ç‹¬ç«‹çš„ Windows PE å¯æ‰§è¡Œæ–‡ä»¶ã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

æœ¬é¡¹ç›®åˆ†ä¸ºä¸‰ä¸ªæ ¸å¿ƒå­é¡¹ç›®æ¨¡å—ï¼š

| å·¥å…· | åŠŸèƒ½è¯´æ˜ |
|------|----------|
| `bf-interpreter` | **è§£é‡Šå™¨**ï¼šç›´æ¥åœ¨è™šæ‹Ÿæœºä¸­è§£é‡Šæ‰§è¡Œ `.bf` æºç ç¨‹åºã€‚ |
| `bf-transpiler` | **è½¬è¯‘å™¨**ï¼šå°† BF æºç è½¬è¯‘ä¸ºç­‰ä»·çš„ä¼˜åŒ–åçš„ C è¯­è¨€æºç ã€‚ |
| `bf-compiler` | **ç¼–è¯‘å™¨**ï¼šå°† BF æºç ç¼–è¯‘ç”Ÿæˆ x86-64 æ±‡ç¼–ä»£ç  (æ”¯æŒ NASM/MASM/AT&T) æˆ–ç›´æ¥ç”Ÿæˆç‹¬ç«‹çš„ Windows PE å¯æ‰§è¡Œæ–‡ä»¶ (`.exe`)ã€‚ |

### ğŸš€ å…ˆè¿›çš„å‰ç«¯ä¼˜åŒ–

ç¼–è¯‘å‰ç«¯å†…ç½®äº† IR (ä¸­é—´è¡¨ç¤º) ç”Ÿæˆå™¨å’Œä¼˜åŒ–å™¨ï¼Œå¯è‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹ä¼˜åŒ–ç­–ç•¥ï¼Œå¤§å¹…æå‡æ‰§è¡Œæ•ˆç‡ï¼š

- **è¿ç»­æŒ‡ä»¤åˆå¹¶**ï¼šå°†å¤šä¸ªç›¸åŒçš„ç®€å•æŒ‡ä»¤æŠ˜å ã€‚ä¾‹å¦‚ `>>>` ä¼˜åŒ–ä¸º `MovePtr(3)`ï¼Œ`+++` ä¼˜åŒ–ä¸º `AddVal(3)`ã€‚
- **æ¸…é›¶å¾ªç¯è¯†åˆ«**ï¼šå°†å¸¸è§çš„æ¸…é›¶ä¹ è¯­ `[-]` / `[+]` ç›´æ¥æ˜ å°„ä¸ºå•ä¸€çš„ `SetZero` æ“ä½œæŒ‡ä»¤ã€‚
- **æ­»ä»£ç æ¶ˆé™¤**ï¼šåˆ†æå¹¶ç§»é™¤ç¨‹åºå¼€å¤´ï¼ˆæ•°æ®æŒ‡é’ˆä¸º0ä¸”æŒ‡å‘å†…å­˜ä¸º0æ—¶ï¼‰ç»å¯¹ä¸å¯è¾¾çš„å¾ªç¯ã€‚

## ğŸ“‚ é¡¹ç›®ç»“æ„

```text
BFCompiler/
â”œâ”€â”€ common/          # å…±äº«å‰ç«¯æ¶æ„ï¼ˆè¯æ³•åˆ†æå™¨ã€è§£æå™¨ã€ä¸­é—´ä»£ç IRã€ä¼˜åŒ–å™¨ï¼‰
â”œâ”€â”€ interpreter/     # BF è§£é‡Šå™¨æ¨¡å—
â”œâ”€â”€ transpiler/      # BF -> C è½¬è¯‘å™¨æ¨¡å—
â”œâ”€â”€ compiler/        # BF -> ASM / PE å¯æ‰§è¡Œæ–‡ä»¶ ç¼–è¯‘å™¨æ¨¡å—
â”œâ”€â”€ docs/            # è¯¦ç»†çš„è®¾è®¡ä¸æ¶æ„æ–‡æ¡£
â””â”€â”€ tests/           # æµ‹è¯•ä½¿ç”¨çš„ Brainfuck ç¨‹åºç¤ºä¾‹
```

## ğŸ› ï¸ æ„å»ºæŒ‡å—

é¡¹ç›®ä½¿ç”¨ CMake ä½œä¸ºä¸»è¦çš„æ„å»ºç³»ç»Ÿï¼ŒåŒæ—¶ä¸ºäº†å…¼å®¹æ€§ä¹Ÿä¿ç•™äº† Makefileã€‚æ¨èä½¿ç”¨ CMakeã€‚

### ç¯å¢ƒè¦æ±‚

- C++17 å…¼å®¹çš„ç¼–è¯‘å™¨ (å¦‚ MinGW-w64 GCC / Clang / MSVC)
- CMake 3.16 åŠä»¥ä¸Šç‰ˆæœ¬

### ä½¿ç”¨ CMake æ„å»ºï¼ˆæ¨èï¼‰

åœ¨ Windows (MinGW) ç¯å¢ƒä¸‹ï¼š

```bash
# 1. é…ç½® CMake ç”Ÿæˆ Makefile
cmake -B build -G "MinGW Makefiles" -DCMAKE_BUILD_TYPE=Release

# 2. ç¼–è¯‘é¡¹ç›®
cmake --build build
```

### ä½¿ç”¨ Makefile æ„å»º

```bash
mingw32-make all
```

æ„å»ºå®Œæˆåï¼Œæ‰€æœ‰çš„å¯æ‰§è¡Œå·¥å…·æ–‡ä»¶ (`bf-interpreter.exe`, `bf-transpiler.exe`, `bf-compiler.exe`) å°†ä½äº `build/` æˆ– `cmake-build/` ç›®å½•ä¸‹ã€‚

## ğŸ’¡ ä½¿ç”¨è¯´æ˜

### è§£é‡Šæ‰§è¡Œ (Interpreter)

ç›´æ¥è¿è¡Œä½ çš„ Brainfuck è„šæœ¬ï¼š

```bash
bf-interpreter hello.bf
```

### è½¬è¯‘ä¸º C è¯­è¨€ (Transpiler)

å°† BF è„šæœ¬è½¬æ¢ä¸º C æºç ï¼š

```bash
bf-transpiler hello.bf              # é»˜è®¤è¾“å‡ºä¸º hello.c
bf-transpiler hello.bf -o out.c     # æ‰‹åŠ¨æŒ‡å®šè¾“å‡ºæ–‡ä»¶åç§°
```

### ç¼–è¯‘ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ (Compiler)

**1. ç›´æ¥ç”Ÿæˆ Windows PE å¯æ‰§è¡Œæ–‡ä»¶ (`.exe`)ï¼š**

å†…éƒ¨è‡ªå¸¦è½»é‡çº§ PE ç”Ÿæˆå™¨ï¼Œä¸ä¾èµ–ä»»ä½•å¤–éƒ¨æ±‡ç¼–å™¨æˆ–é“¾æ¥å™¨ï¼

```bash
bf-compiler hello.bf                # é»˜è®¤è¾“å‡ºä¸º hello.exe
bf-compiler hello.bf -o myapp.exe
```

**2. ä»…ç”Ÿæˆæ±‡ç¼–æºç ï¼š**

ä¾›å­¦ä¹ ç ”ç©¶æˆ–ä¸å…¶ä»–é¡¹ç›®é“¾æ¥ï¼š

```bash
bf-compiler hello.bf --asm                    # é»˜è®¤ä½¿ç”¨ NASM æ ¼å¼
bf-compiler hello.bf --asm --format=nasm      # ç”Ÿæˆ NASM æ ¼å¼æ±‡ç¼–
bf-compiler hello.bf --asm --format=masm      # ç”Ÿæˆ MASM æ ¼å¼æ±‡ç¼–
bf-compiler hello.bf --asm --format=att       # ç”Ÿæˆ AT&T/GAS æ ¼å¼æ±‡ç¼–
```

## ğŸ“ åˆ›ä½œè€…ä¿¡æ¯

- **ä½œè€…**: 3aKHP
- **è”ç³»é‚®ç®±**: 2971755027@qq.com

---

## ğŸ“„ è®¸å¯è¯ (License)

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚
